%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode

% Author: Romain "Artefact2" Dal Maso <artefact2@gmail.com>
% 
% This program is free software. It comes without any warranty, to the
% extent permitted by applicable law. You can redistribute it and/or
% modify it under the terms of the Do What The Fuck You Want To Public
% License, Version 2, as published by Sam Hocevar. See
% http://sam.zoy.org/wtfpl/COPYING for more details.

\ifdefined\isdraft
\documentclass[10pt,a4paper,draft,twocolumn]{memoir}
\else
\documentclass[10pt,a4paper,twocolumn]{memoir}
\fi
\usepackage{xltxtra}
\usepackage{fontspec}
\usepackage{xunicode}
\usepackage[table]{xcolor}
\usepackage{background}
\usepackage{calc}
\usepackage[absolute,overlay]{textpos}
\usepackage{zref-savepos}
\usepackage{lettrine}
\usepackage[percent]{overpic}
\usepackage{hyperref}
\usepackage{lipsum}
\usepackage{environ}
\usepackage{fp}
\usepackage{multirow,makecell}
\usepackage{dblfloatfix}

\newcommand{\zx}[1]{\zposx{#1}sp}
\newcommand{\zy}[1]{\paperheight-\zposy{#1}sp}

\definecolor{chapter}{RGB}{88, 23, 13}
\definecolor{subsecrule}{RGB}{211, 169, 98}
\definecolor{footer}{RGB}{128, 110, 76}
\definecolor{note}{RGB}{224, 229, 193}

\input{inc/fonts}
\input{inc/sectioning}
\input{inc/layout}
\input{inc/notes}
\input{inc/statblocks}
\input{inc/tables}

\newcommand*{\phLettrine}[2]{\lettrine[lines=6,nindent=0pt]{{\solberaimitation #1}}{#2}}
\newcommand*{\phLettrined}[2]{\lettrine[lines=6,depth=1,nindent=0pt]{{\solberaimitation #1}}{#2}}
\renewcommand*{\LettrineTextFont}{\mreaves}

\newcommand*{\phNone}{\rule[0.2\baselineskip]{1em}{.75pt}}

% StrokeColor, FillColor, StrokeWidth, Text
\newcommand*{\fillstroke}[4]{%
% this is black magic
% ref: http://tex.stackexchange.com/a/225639/125447
% Tr: rendering mode (0=Fill, 1=Stroke, 2=FillThenStroke)
% w: stroke width
\special{pdf:bcolor #1 #2}%
\special{pdf:literal direct #3 w 2 Tr}%
#4%
% ref: http://project.ktug.org/dvipdfmx/doc/tug2005.pdf
\special{pdf:ecolor}%
\special{pdf:literal direct 0 Tr}%
}
